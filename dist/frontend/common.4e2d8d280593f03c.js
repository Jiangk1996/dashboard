"use strict";(self.webpackChunkKubediag=self.webpackChunkKubediag||[]).push([[592],{5187:(b,D,o)=>{o.d(D,{f:()=>k});var P=o(4004),y=o(9646),K=o(5e3),L=o(520);let k=(()=>{class r{constructor(e){this.http=e,this.list=[],this.rowList=[]}getList(){const e=this.http.get("/list",{params:{type:"operations"}}),O=(0,P.U)(c=>(this.rowList=c.items,c.items.map(t=>{var p,a,d,u,l,v,h,_,S,g,m,f,R;if(t.spec.processor.httpServer){const i=null===(p=t.spec.processor.httpServer)||void 0===p?void 0:p.scheme,s=(null===(a=t.spec.processor.httpServer)||void 0===a?void 0:a.address)||"0.0.0.0",E=(null===(d=t.spec.processor.httpServer)||void 0===d?void 0:d.port)||8090;return{name:t.metadata.name,scheme:i,address:s,port:E,path:null===(u=t.spec.processor.httpServer)||void 0===u?void 0:u.path,url:(null===(l=t.spec.processor.httpServer)||void 0===l?void 0:l.scheme)+"://"+s+":"+E+(null===(v=t.spec.processor.httpServer)||void 0===v?void 0:v.path),timeoutSeconds:t.spec.processor.timeoutSeconds,type:"HTTPServer"}}if(t.spec.processor.scriptRunner)return{name:t.metadata.name,timeoutSeconds:t.spec.processor.timeoutSeconds,script:null===(h=t.spec.processor.scriptRunner)||void 0===h?void 0:h.script,argKeys:null===(_=t.spec.processor.scriptRunner)||void 0===_?void 0:_.argKeys,operationResultKey:null===(S=t.spec.processor.scriptRunner)||void 0===S?void 0:S.operationResultKey,type:"ScriptRunner"};{const i={name:t.metadata.name,runtime:null===(g=t.spec.processor.function)||void 0===g?void 0:g.runtime,codeSource:[],timeoutSeconds:t.spec.processor.timeoutSeconds,type:"Function"};for(let s in null===(m=t.spec.processor.function)||void 0===m?void 0:m.codeSource)null===(f=i.codeSource)||void 0===f||f.push({key:s,value:(null===(R=t.spec.processor.function)||void 0===R?void 0:R.codeSource[s])||""});return i}})))(e);return O.subscribe(c=>{this.list=c}),O}create(e){return this.http.post("/create",e)}getOperation(e){return(0,y.of)(this.list[+e])}getRowDiagnosis(e){return(0,y.of)(this.rowList[+e])}edit(e){return this.http.post("/edit",e)}delete(e){return this.http.post("/delete",this.rowList[e])}createHttpServerParams(e){return{apiVersion:"diagnosis.kubediag.org/v1",kind:"Operation",metadata:{name:e.name},spec:{processor:{timeoutSeconds:e.timeoutSeconds||30,httpServer:{address:e.address||"0.0.0.0",scheme:e.scheme,port:e.port||8090,path:e.path}}}}}createScriptRunnerParams(e){return{apiVersion:"diagnosis.kubediag.org/v1",kind:"Operation",metadata:{name:e.name},spec:{processor:{timeoutSeconds:e.timeoutSeconds||30,scriptRunner:{operationResultKey:e.operationResultKey,script:e.script,argKeys:e.argKeys}}}}}}return r.\u0275fac=function(e){return new(e||r)(K.LFG(L.eN))},r.\u0275prov=K.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);